<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Universe VIT</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
</head>
<body>

<!-- NAVBAR -->
<header class="navbar">
    <div class="nav-left">
        <img src="{{ url_for('static', filename='images/vit_logo.png') }}" class="logo">
        <h1>Universe VIT</h1>
    </div>

    <div class="nav-right">
        <a href="/my-events" class="nav-btn">My Events</a>
    </div>
</header>



<!-- HERO -->
<section class="hero">
    <div class="hero-content">
        <h2>Welcome to Universe VIT</h2>
        <p>
            Your centralized hub for campus events, workshops, clubs & academic opportunities.
        </p>
    </div>
</section>

<!-- SEARCH SECTION -->
<section class="search-section">
    <form action="/search" method="GET" class="search-container">
        <input type="text" name="q" placeholder="Search events, workshops, clubs..." required>
        <button type="submit">Search</button>
    </form>
</section>

<!-- RECOMMENDED EVENTS -->
<section class="recommended" id="recommendedSection" style="display:none;">
    <h2>‚≠ê Recommended for You</h2>
    <div class="cards" id="recommendedCards"></div>
</section>

<!-- UPCOMING EVENTS -->
{% if upcoming|length > 0 %}
<section class="upcoming">
    <h2>üîî Upcoming in Next 3 Days</h2>

    <div class="cards">
        {% for event in upcoming %}
        <div class="card upcoming-card">
            <h3>{{ event.title }}</h3>
            <p>{{ event.category }}</p>
            <p>{{ event.date }} | {{ event.time }}</p>
            <p>{{ event.venue }}</p>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- TRENDING EVENTS -->
<section class="featured">
    <div class="featured-header">
        <h2>üî• Trending Now</h2>
        <button class="filter-btn" onclick="toggleFilter()">Filter</button>
    </div>

    <div class="cards">
        {% for event in events %}
        <div class="card event-card"
             data-category="{{ event.category }}"
             data-date="{{ event.date }}"
             data-time="{{ event.time }}"
             onclick="saveEventPreference('{{ event.category }}')">
            <h3>{{ event.title }}</h3>
            <p>{{ event.category }} | {{ event.date }} | {{ event.time }}</p>
            <p>{{ event.venue }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- CATEGORIES -->
<section class="categories">
    <h2>Explore by Category</h2>
    <div class="cards">
        {% for category, image in categories.items() %}
        <a href="{{ url_for('category_page', category_name=category) }}"
           class="category-link"
           onclick="savePreference('{{ category }}')">
            <div class="card category-card">
                <img src="{{ url_for('static', filename='images/' + image) }}">
                <h3>{{ category }}</h3>
            </div>
        </a>
        {% endfor %}
    </div>
</section>

<!-- FILTER SIDEBAR -->
<div class="filter-overlay" id="filterOverlay" onclick="toggleFilter()"></div>

<aside class="filter-panel" id="filterPanel">
    <h3>Filter Events</h3>

    <label>Category</label>
    <select id="categoryFilter">
        <option value="all">All</option>
        <option value="Cultural">Cultural</option>
        <option value="Technical">Technical</option>
        <option value="Sports">Sports</option>
        <option value="Workshop">Workshop</option>
        <option value="Value-Added Course">Value-Added Course</option>
    </select>

    <label>Date</label>
    <input type="date" id="dateFilter">

    <label>Time</label>
    <select id="timeFilter">
        <option value="">Any</option>
        <option value="Morning">Morning</option>
        <option value="Afternoon">Afternoon</option>
        <option value="Evening">Evening</option>
    </select>

    <button onclick="applyFilters()">Apply Filters</button>
</aside>

<script src="{{ url_for('static', filename='js/filter.js') }}"></script>

<!-- CONTACT SECTION -->
<section class="contact-section">
    <div class="contact-container">
        <div class="contact-item">üìß campuspulse@vit.ac.in</div>
        <div class="contact-item">üìç VIT University, Vellore, Tamil Nadu</div>
        <div class="contact-item">‚òé +91 98765 43210</div>
    </div>
</section>

<!-- FOOTER -->
<footer class="footer">
    <span>Last Updated: February 2026</span>
    <span>¬© Vellore Institute of Technology | Privacy Policy</span>
</footer>

<!-- SAVE PREFERENCES -->
<script>
function savePreference(category) {
    localStorage.setItem("preferredCategory", category);
}

function saveEventPreference(category) {
    localStorage.setItem("preferredCategory", category);
}
</script>

<!-- RECOMMENDATION LOGIC -->
<script>
window.onload = function () {
    let preferred = localStorage.getItem("preferredCategory");
    if (!preferred) return;

    let allCards = document.querySelectorAll(".event-card");
    let container = document.getElementById("recommendedCards");
    let section = document.getElementById("recommendedSection");

    let count = 0;

    allCards.forEach(card => {
        let category = card.dataset.category;

        if (category && category.includes(preferred.split(" ")[0]) && count < 3) {
            let clone = card.cloneNode(true);
            container.appendChild(clone);
            count++;
        }
    });

    if (count > 0) {
        section.style.display = "block";
    }
};
</script>

</body>
</html>
